# **Lorebook Generator from Chat**

## **Причина тряски?**

Фантомас рабушевался и ему срочно понадобился способ автоматизации создания лорбука из сообщений в чате без потери контекста.

## **Описание**

**Lorebook Generator from Chat** — это расширение для SillyTavern, которое позволяет быстро и удобно создавать файлы лорбуков (.json) прямо из вашего текущего чата.  
Основная задача расширения — автоматически разделять длинные диалоги на отдельные логические сцены (записи в лорбуке) по принципу "реплика(и) бота \+ ответ игрока". Это позволяет эффективно переносить историю из чата в формат, понятный для нейросети, сохраняя **весь** контекст и хронологию событий.

## **Основные возможности**

* **Работа с активным чатом:** Не нужно искать файлы вручную. Расширение автоматически берет данные из того чата, который у вас открыт.  
* **Автоматическое разделение на сцены:** Интеллектуально группирует сообщения в отдельные записи лорбука, где каждая запись — это законченный обмен репликами (не обрезает сообщения).  
* **Гибкая настройка диапазона:** Вы можете указать, с какого и по какое сообщение в чате вы хотите создать лорбук.  
* **Генерация файла:** Создает готовый .json файл лорбука, который сразу же скачивается вашим браузером.  
* **Совместимость:** Сгенерированные файлы полностью соответствуют формату лорбуков SillyTavern и готовы к импорту без дополнительных правок.  
* **Простой интерфейс:** Интуитивно понятное модальное окно для управления генерацией.

## **Установка**

Установка расширения производится стандартным для SillyTavern способом через загрузчик расширений.

1. Откройте SillyTavern.  
2. Перейдите в меню расширений.  
3. Нажмите на кнопку "Скачать / обновить расширения".  
4. В появившемся окне в поле **"Git-адрес расширения"** вставьте ссылку на репозиторий:  
   \[(https://github.com/itsfantomas/LorebookGeneratorFromChat)\]

   5. Нажмите **"Установить только мне"** (или "для всех пользователей", если нужно).  
5. Дождитесь окончания установки.  
6. **Важно:** После установки полностью **перезапустите сервер SillyTavern** (закройте консоль и запустите start.bat / start.sh заново). Простой перезагрузки страницы может быть недостаточно. Либо если вы ленивы как автор, то прямо в консоли нажмите **Ctrl+C** и **npm start**

## **Как пользоваться**

1. Откройте чат с персонажем, из которого вы хотите создать лорбук.  
2. Нажмите на иконку меню (три полоски) в строке ввода.  
3. В выпадающем меню выберите **"Lorebook Generator"**.  
4. В появившемся модальном окне:  
   * **Название лорбука:** Имя файла будет предзаполнено на основе имени персонажа, но вы можете его изменить.  
   * **Начать с / Закончить на:** Укажите диапазон сообщений, которые вы хотите включить в лорбук. Нумерация начинается с 0\. Если оставить поле "Закончить на" пустым, скрипт обработает все сообщения до конца чата.  
5. Нажмите кнопку **"Создать и Скачать Лорбук"**.  
6. Браузер скачает готовый .json файл.  
7. Перейдите в SillyTavern во вкладку **"World Info"** (Информация о мире) и импортируйте скачанный файл через соответствующую кнопку.

Готово\! Ваш чат теперь преобразован в структурированный лорбук.
